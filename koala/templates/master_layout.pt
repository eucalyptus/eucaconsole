<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n">
<head>
    <title>Eucalyptus Management Console</title>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="shortcut icon" href="${request.static_url('koala:static/img/favicon.ico')}" />
    <link rel="stylesheet" href="${request.static_url('koala:static/fonts/foundation/foundation-icons.css')}"
          type="text/css" media="screen" charset="utf-8" />
    <link rel="stylesheet" href="${request.static_url('koala:static/css/koala.css')}"
          type="text/css" media="screen" charset="utf-8" />
    <meta metal:define-slot="head_css" />
    <script src="${request.static_url('koala:static/js/thirdparty/modernizr/custom.modernizr.js')}"></script>
    <script src="${request.static_url('koala:static/js/thirdparty/jquery/jquery-2.0.3.min.js')}"></script>
    <script src="${request.static_url('koala:static/js/thirdparty/angular/angular-1.2.0.min.js')}"></script>
    <meta metal:define-slot="head_js" />
</head>

<body>
<nav id="logobar" class="top-bar ${'' if request.user.is_authenticated() else 'signedout'}" metal:define-slot="logobar">
    <a id="logo" href="${layout.home_url}" title="${layout.site_title}"></a>
    <section tal:condition="request.user.is_authenticated()">
        <a href="#" data-dropdown="user-dropdown" class="small secondary button dropdown">
            <span class="hide-for-xsmall">${layout.username_label}</span>
            <span class="show-for-xsmall"><i class="fi-torso icon"></i></span>
        </a>
        <ul id="user-dropdown" class="f-dropdown">
            <li><a href="${layout.help_url}" target="_blank" i18n:translate="">Help</a></li>
            <li><a href="#" i18n:translate="">Change password</a></li>
            <li><a href="${request.route_url('logout')}" i18n:translate="">Logout</a></li>
        </ul>
    </section>
    <section tal:condition="request.user.is_authenticated() and layout.cloud_type == 'aws'">
        <a href="#" data-dropdown="region-dropdown" class="small secondary button dropdown">
            <span class="hide-for-xsmall">${layout.selected_region_label}</span>
            <span class="show-for-xsmall"><i class="fi-cloud icon"></i></span>
        </a>
        <ul id="region-dropdown" class="f-dropdown">
            <li tal:repeat="region layout.aws_regions" tal:attributes="data-selected (region.name == layout.selected_region)">
                <a href="${request.route_url('region_select')}?region=${region.name}&amp;returnto=${request.url}">
                        ${region.label}
                </a>
            </li>
        </ul>
    </section>
</nav>

<nav class="top-bar" tal:condition="request.user.is_authenticated()" metal:define-slot="navbar">
    <ul class="title-area">
        <li class="name"></li>
        <li class="toggle-topbar menu-icon"><a href="#"><span></span></a></li>
    </ul>

    <section class="top-bar-section">
        <ul class="resources-nav left-align">
            <li><a id="resource-menu-dashboard" class="lnk-dashboard" href="${request.route_url('dashboard')}">Dashboard</a></li>
            <li><a id="resource-menu-image" class="lnk-image" href="${request.route_url('images')}">Images</a></li>
            <li class="has-dropdown">
                <a id="resource-menu-instance" class="lnk-instance" href="${request.route_url('instances')}">Instances</a>
                <ul class="dropdown">
                    <li><a id="resource-menuitem-instance" href="${request.route_url('instances')}">Instances</a></li>
                    <li class="divider"></li>
                    <li><a id="resource-menuitem-scaling" href="${request.route_url('scalinggroups')}">Auto Scaling Groups</a></li>
                    <li class="divider"></li>
                    <li><a id="resource-menuitem-scaling" href="${request.route_url('launchconfigs')}">Launch Configurations</a></li>
                </ul>
            </li>
            <li class="has-dropdown">
                <a id="resource-menu-storage" class="lnk-storage" href="#">Storage</a>
                <ul class="dropdown">
                    <li><a id="resource-menuitem-volume" href="${request.route_url('volumes')}">Volumes</a></li>
                    <li class="divider"></li>
                    <li><a id="resource-menuitem-snapshot" href="${request.route_url('snapshots')}">Snapshots</a></li>
                </ul>
            </li>
            <li class="has-dropdown">
                <a id="resource-menu-netsec" class="lnk-netsec" href="#">Network &amp; Security</a>
                <ul class="dropdown">
                    <li><a id="resource-menuitem-sgroup" href="${request.route_url('securitygroups')}">Security Groups</a></li>
                    <li class="divider"></li>
                    <li><a id="resource-menuitem-keypair" href="${request.route_url('keypairs')}">Key Pairs</a></li>
                    <li class="divider"></li>
                    <li><a id="resource-menuitem-eip" href="${request.route_url('ipaddresses')}">IP Addresses</a></li>
                </ul>
            </li>
        </ul>
    </section>
</nav>

<!-- Main Content -->
<section class="main" id="maincontent" role="content">
    <div metal:define-slot="main_content"></div>
</section>
<!-- End Main Content -->

<!-- Footer -->
<footer>
    <div class="row">
       <h6 class="copyright subheader">
           Â© 2012-2013 Eucalyptus Systems, Inc. <span i18n:translate="">All rights reserved</span>.</h6>
    </div>
</footer>

<script src="${request.static_url('koala:static/js/thirdparty/foundation/foundation.min.js')}"></script>
<script type="text/javascript">
    // Initialize all Zurb Foundation components
    $(document).foundation().foundation('abide', {
        patterns: {
            cidr_ip_address: /^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])(\/\d+)$/,
            tag_pattern: /^(?!aws:).*/  // Tags may not begin with 'aws:'
        }
    });
</script>
<div metal:define-slot="tail_js"></div>
</body>
</html>
