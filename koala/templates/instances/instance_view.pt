<metal:block use-macro="main_template">

<head metal:fill-slot="head_css">
    <link rel="stylesheet" type="text/css" href="${request.static_url('koala:static/css/pages/instance.css')}" />
</head>

<div metal:fill-slot="main_content">

    <div class="row" id="contentwrap" tal:define="instance_name instance.tags.get('name', instance.id)">
        <h3 class="header" id="pagetitle" i18n:translate="">
            <span i18n:translate="">Instance</span> ${instance_name}
        </h3>
        <div class="large-8 columns">
            <div class="panel has-title">
                <h6 class="title">
                    <span i18n:translate="">Settings for instance</span>
                    <strong>${instance_name}</strong>
                </h6>
                <form action="#" method="post" data-abide="abide">
                    ${structure:instance_form['csrf_token']}
                    <div class="row inline readonly">
                        <div class="small-3 columns"><label i18n:translate="">Status</label></div>
                        <div class="small-9 columns value">
                            <span class="status ${instance.state}">${instance.state.capitalize()}</span>
                        </div>
                    </div>
                    ${panel('form_field', field=instance_form.instance_type)}
                    <div class="row inline readonly" tal:condition="instance.platform">
                        <div class="small-3 columns"><label i18n:translate="">OS</label></div>
                        <div class="small-9 columns value">${instance.platform}</div>
                    </div>
                    <div class="row inline readonly">
                        <div class="small-3 columns"><label i18n:translate="">Root device type</label></div>
                        <div class="small-9 columns value">${instance.root_device_type}</div>
                    </div>
                    <div class="row inline readonly">
                        <div class="small-3 columns"><label i18n:translate="">Architecture</label></div>
                        <div class="small-9 columns value">${instance.architecture or image.architecture}</div>
                    </div>
                    <div class="row inline readonly">
                        <div class="small-3 columns"><label i18n:translate="">Instance ID</label></div>
                        <div class="small-9 columns value">${instance.id}</div>
                    </div>
                    <div class="row inline readonly">
                        <div class="small-3 columns"><label i18n:translate="">Availability zone</label></div>
                        <div class="small-9 columns value">${instance.placement}</div>
                    </div>
                    ${panel('form_field', field=instance_form.ip_address)}
                    <div class="row inline readonly" tal:condition="instance.private_ip_address">
                        <div class="small-3 columns"><label i18n:translate="">Private IP address</label></div>
                        <div class="small-9 columns value">${instance.private_ip_address}</div>
                    </div>
                    <div class="row inline readonly"
                         tal:condition="instance.public_dns_name != instance.ip_address">
                        <div class="small-3 columns"><label i18n:translate="">Public hostname</label></div>
                        <div class="small-9 columns value">${instance.public_dns_name}</div>
                    </div>
                    <div class="row inline readonly"
                         tal:condition="instance.private_dns_name != instance.private_ip_address">
                        <div class="small-3 columns"><label i18n:translate="">Private hostname</label></div>
                        <div class="small-9 columns value">${instance.private_dns_name}</div>
                    </div>
                    <div class="row inline readonly">
                        <div class="small-3 columns"><label i18n:translate="">Key name</label></div>
                        <div class="small-9 columns value">${instance.key_name}</div>
                    </div>
                    <div class="row inline readonly">
                        <div class="small-3 columns"><label i18n:translate="">Security group</label></div>
                        <div class="small-9 columns value">
                            <div tal:repeat="group instance.groups">${group.name}</div>
                        </div>
                    </div>
                    <div class="row inline readonly">
                        <div class="small-3 columns"><label i18n:translate="">Launch time</label></div>
                        <div class="small-9 columns value">${instance_launch_time.strftime(layout.date_format)}</div>
                    </div>
                    <div class="row inline readonly" tal:condition="scaling_group">
                        <div class="small-3 columns"><label i18n:translate="">Scaling group</label></div>
                        <div class="small-9 columns value">${scaling_group}</div>
                    </div>
                    <div class="row inline readonly" tal:condition="instance.instance_profile">
                        <div class="small-3 columns"><label i18n:translate="">Instance profile</label></div>
                        <div class="small-9 columns value">${instance.instance_profile}</div>
                    </div>
                    <hr />
                    <div class="row inline readonly">
                        <div class="small-3 columns"><label i18n:translate="">Image ID</label></div>
                        <div class="small-9 columns value">${image.id}</div>
                    </div>
                    <div class="row inline readonly">
                        <div class="small-3 columns"><label i18n:translate="">Image name</label></div>
                        <div class="small-9 columns value">${image.name}</div>
                    </div>
                    <div class="row inline readonly">
                        <div class="small-3 columns"><label i18n:translate="">Kernel ID</label></div>
                        <div class="small-9 columns value">${image.kernel_id}</div>
                    </div>
                    <div class="row inline readonly">
                        <div class="small-3 columns"><label i18n:translate="">RAM Disk ID</label></div>
                        <div class="small-9 columns value">${image.ramdisk_id}</div>
                    </div>
                    <hr />
                    ${panel('tag_editor', tags=instance.tags)}
                    <hr />
                    <div class="row">
                        <div class="small-3 columns">&nbsp;</div>
                        <div class="small-9 columns field inline">
                            <button type="submit" class="button"><span i18n:translate="">Save changes</span></button>
                            <a href="${request.route_url('instances')}"
                               class="cancel-link" i18n:translate="">Cancel</a>
                        </div>
                    </div>
                </form>
            </div>
            <div class="panel has-title">
                <h6 class="title" i18n:translate="">Other actions</h6>
                <div class="row">
                    <div class="large-3 columns">&nbsp;</div>
                    <div class="large-9 columns">
                        <a class="button secondary" i18n:translate="">
                            Launch more like this
                        </a>
                    </div>
                </div>
                <div class="row">
                    <div class="large-3 columns">&nbsp;</div>
                    <div class="large-9 columns">
                        <a class="button secondary" i18n:translate="">
                            Create scaling group launch configuration like this
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="large-4 columns">
            <!-- help goes here -->
        </div>
    </div>

</div>
</metal:block>